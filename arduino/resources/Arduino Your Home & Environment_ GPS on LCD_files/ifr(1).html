
<!-- saved from url=(0632)http://9dl7h78ivl8smpn7vl3d9mo2g1ajbhaj-a-blogger-opensocial.googleusercontent.com/gadgets/ifr?url=http://wms.assoc-amazon.com/GoogleGadgets/amzn_omakase.xml&container=blogger&view=default&lang=en&country=ALL&sanitize=0&v=5c1cb6d7bc044a9b&libs=core:dynamic-height:google.blog:locked-domain:rpc:setprefs:skins:views&parent=arduinotronics.blogspot.co.uk/&up_size=7&up_color_theme=0&mid=1#up_size=7&up_color_theme=0&st=e%3DAFlCd0VNnYAjbAp%252Fd7X%252FcdIlNB56tluOLbbhdZTY6Meh65IYYfSFxwMWFqzJwhyJZcaBfVv1%252B%252F%252FGBVnjb7ifuE8UAFWsp6QuMyo%252BqG6CswEWfTBaRbU%252BIdcmQDYNs4UykwMf44PgAe3M%26c%3Dblogger&rpctoken=-7330898674647113514 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script>(function(){var a=window,f="chrome",h="tick",k="external";(function(){function l(b){this.t={};this.tick=function(b,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[b]=[e,d];if(void 0==c)try{a.console.timeStamp("CSI/"+b)}catch(g){}};this[h]("start",null,b)}var b;a.performance&&(b=a.performance.timing);var d=b?new l(b.responseStart):new l;a.jstiming={Timer:l,load:d};if(b){var c=b.navigationStart,g=b.responseStart;0<c&&g>=c&&(a.jstiming.srt=g-c)}if(b){var e=a.jstiming.load;0<c&&g>=c&&(e[h]("_wtsrt",void 0,c),e[h]("wtsrt_","_wtsrt",g),e[h]("tbsd_","wtsrt_"))}try{b=
top!=self;var m=a.location.href,d=null;a[f]&&a[f].csi&&(d=Math.floor(a[f].csi().pageT),e&&0<c&&(e[h]("_tbnd",void 0,a[f].csi().startE),e[h]("tbnd_","_tbnd",c)));null==d&&a.gtbExternal&&(d=b?a.gtbExternal.frameT(m):a.gtbExternal.pageT());null==d&&a[k]&&(b?d=a[k].frameT(m):(d=a[k].pageT,e&&0<c&&(e[h]("_tbnd",void 0,a[k].startE),e[h]("tbnd_","_tbnd",c))));d&&(a.jstiming.pt=d)}catch(n){}})();})();
window["__csi"]={a:false,b:false,c:"blogger",v:"default",g:null,d:false};if(window.jstiming){window.jstiming.beaconImageReferences_={};window.jstiming.reportCounter_=1;var getTick=function(c,b,d){var a=c.t[b],h=c.t.start;if(a&&(h||d))return a=c.t[b][0],h=void 0!=d?d:h[0],a-h},getReportUri=function(c,b,d){var a="";window.jstiming.srt&&(a+="&srt="+window.jstiming.srt,delete window.jstiming.srt);window.jstiming.pt&&(a+="&tbsrt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?a+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?
a+="&tran="+window.gtbExternal.tran():window.chrome&&window.chrome.csi&&(a+="&tran="+window.chrome.csi().tran)}catch(h){}var f=window.chrome;if(f&&(f=f.loadTimes)){f().wasFetchedViaSpdy&&(a+="&p=s");if(f().wasNpnNegotiated){var a=a+"&npn=1",g=f().npnNegotiatedProtocol;g&&(a+="&npnv="+(encodeURIComponent||escape)(g))}f().wasAlternateProtocolAvailable&&(a+="&apa=1")}var e=c.t,n=e.start,f=[],g=[],k;for(k in e)if("start"!=k&&0!=k.indexOf("_")){var l=e[k][1];l?e[l]&&g.push(k+"."+getTick(c,k,e[l][0])):
n&&f.push(k+"."+getTick(c,k))}delete e.start;if(b)for(var q in b)a+="&"+q+"="+b[q];(b=d)||(b="https:"==document.location.protocol?"https://csi.gstatic.com/csi":"http://csi.gstatic.com/csi");return c=[b,"?v=3","&s="+(window.jstiming.sn||"opensocial-gadgets")+"&action=",c.name,g.length?"&it="+g.join(","):"",a,"&rt=",f.join(",")].join("")},sendReport_=function(c,b,d){c=getReportUri(c,b,d);if(!c)return"";b=new Image;var a=window.jstiming.reportCounter_++;window.jstiming.beaconImageReferences_[a]=b;b.onload=
b.onerror=function(){window.jstiming&&delete window.jstiming.beaconImageReferences_[a]};b.src=c;b=null;return c};window.jstiming.report=function(c,b,d){if("prerender"==document.webkitVisibilityState){var a="webkitvisibilitychange",h=!1,f=function(){if(!h){b?b.prerender="1":b={prerender:"1"};var g;"prerender"==document.webkitVisibilityState?g=!1:(sendReport_(c,b,d),g=!0);g&&(h=!0,document.removeEventListener(a,f,!1))}};document.addEventListener(a,f,!1);return""}return sendReport_(c,b,d)}};var google=window.google||{};
google.csi=function(){function c(a){var b=e?e:document.location.href;return(a=b.match(RegExp("[?&]"+a+"=([^&#]+)")))?a[1]:null}function b(a){window.jstiming.load.tick(a);g[a]=(new Date).getTime()}function d(){if(!k){var a=c("url")||"default",b=window.__csi||{},d=b.c||"default",h=b.v||"default",e=window.encodeURIComponent?encodeURIComponent:escape,e={gadget:e(a),container:e(d),view:e(h)},l=window.__dflags||{},p=[];b.g&&p.push(b.g);if(b.d)for(var m in l)"control"!==l[m]&&(e[m]=l[m],"true"===l[m]&&p.push(m));
e.e=p.join(",");m=n?n:document.location.protocol;m=f[m];window.jstiming.load.name=[d,"_",h].join("");window.jstiming.report(window.jstiming.load,e,m);(d=window.gadgets)&&d.rpc&&b.b&&(g.url=a,g.id=c("mid"),d.rpc.call(null,"time_iframe",null,g));k=!0}}function a(a){window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)}function h(a){window.onbeforeunload=a}var f={"http:":"http://csi.gstatic.com/csi","https:":"https://gg.google.com/csi"},g={},
e,n,k=!1,l=window.__csi||{};l.a?(a(function(){b("prt")}),h(function(){d()})):a(function(){b("ol");b("prt");d()});return{reset_:function(){k=!1},mockHref_:function(a){e=a},mockProtocol_:function(a){n=a},report_:d,tickPrtAndReport:function(){b("prt");d()},tickDl:function(){b("dl")}}}();
</script><script>__dflags={"GmailSkinsGadgetRewriter":"true","DynamicHeightGadgetRewriter":"true","AnalyticsGadgetRewriter":"true","StyleAdjacencyGadgetRewriter":"true","CsiSample":"true","UseETags":"false","StyleTagExtractorGadgetRewriter":"true","JsSubVersion":"control","LogResources":"false","ContentDivGadgetRewriter":"false","TimeSecsSinceEpochEnvGadgetRewriter":"true","AdsUrlGadgetRewriter":"true","ErrorCodesToLog":"control","YtVideoUrlGadgetRewriter":"true","ProxyingGadgetRewriter":"true","UseIfrVersion":"true","ForceCoreNoneRequireFeatures":"false","UseCajaSerializer":"false","IfrSubVersion":"control","DflagsJsDebugGadgetRewriter":"true","GadgetBlacklist":"control","MiniMessageGadgetRewriter":"true","UseJsHintIfAvailable":"false","TrackResources":"false","ClickTrackGadgetRewriter":"false","InjectClientId":"false","HtmlParser":"control","UseUrlGadgetWhitelist":"false","ResourceUsageJsDebugGadgetRewriter":"true","UrlTranslations":"control","Monkeypatch":"control","ValidateTypeUrl":"true","UseJsPipelineForRendering":"false"};

/* mp-start */
window['___jsl']=window['___jsl']||{};
/* mp-end */
</script><style type="text/css">body,td,div,span,p{font-family:arial,sans-serif;}a {color:#0000cc;}a:visited {color:#551a8b;}a:active {color:#ff0000;}body{margin: 0px;padding: 0px;background-color:white;}</style><script>window['__isgadget']=true;</script><script src="core-dynamic-height-google.blog-locked-domain-rpc-setprefs-skins-views.js"></script><script>window['___jsl'] = window['___jsl'] || {};(window['___jsl']['ci'] = (window['___jsl']['ci'] || [])).push({"skins":{"properties":{"BG_COLOR":"","BG_POSITION":"","BG_REPEAT":"","ANCHOR_COLOR":"","FONT_COLOR":"","BG_IMAGE":""}},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www-blogger-opensocial.googleusercontent.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"},"shindig.auth":{"authToken":"","trustedJson":""},"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"core.util":{"setprefs":{},"skins":{},"core":{},"rpc":{},"locked-domain":{},"google.blog":{},"dynamic-height":{},"views":{}},"views":{"canvas":{"aliases":["FULL_PAGE"],"urlTemplate":"http://www.gmodules.com/gadgets/ifr?{var}","isOnlyVisible":true},"profile":{"aliases":["DASHBOARD","default"],"urlTemplate":"http://www.gmodules.com/gadgets/ifr?{var}","isOnlyVisible":false}}});gadgets.config.init({"skins":{"properties":{"BG_COLOR":"","BG_POSITION":"","BG_REPEAT":"","ANCHOR_COLOR":"","FONT_COLOR":"","BG_IMAGE":""}},"core.io":{"jsonProxyUrl":"//%host%/gadgets/makeRequest","proxyUrl":"//www-blogger-opensocial.googleusercontent.com/gadgets/proxy/refresh=%refresh%&container=%container%%rewriteMime%&gadget=%gadget%/%rawurl%"},"shindig.auth":{"authToken":"","trustedJson":""},"rpc":{"commSwf":"//xpc.googleusercontent.com/gadgets/xpc.swf","passReferrer":"p2c:query","parentRelayUrl":"/rpc_relay.html"},"core.util":{"setprefs":{},"skins":{},"core":{},"rpc":{},"locked-domain":{},"google.blog":{},"dynamic-height":{},"views":{}},"views":{"canvas":{"aliases":["FULL_PAGE"],"urlTemplate":"http://www.gmodules.com/gadgets/ifr?{var}","isOnlyVisible":true},"profile":{"aliases":["DASHBOARD","default"],"urlTemplate":"http://www.gmodules.com/gadgets/ifr?{var}","isOnlyVisible":false}}});
</script><script>gadgets.Prefs.setMessages_({});gadgets.Prefs.setDefaultPrefs_({"size":"0","color_theme":"0"});gadgets.io.preloaded_=[];</script><style type="text/css">
    #legalNotice {
        font-size: 9px;
        display: none;
        clear: both;
    }

    body {
        width: 100%;
    }

    table tr td {
        width: 100%;
    }

    iframe {
        border:none;
        padding: 0;
        margin: 0;
    }
</style>
    <title>Amazon Contextual Product Ads</title>

</head><body dir="ltr">
<table align="center" id="centeringTable">
    <tbody><tr>
        <td align="center" id="widget">
        </td>
    </tr>
</tbody></table>

<br>

<div id="legalNotice">
    By clicking 'Save', you agree to Amazon's Widget
    <a href="https://widgets.amazon.com/Terms-Of-Use/" target="_blank">Terms of Use</a>.
</div>
<script type="text/javascript">
    var config = {
        widgetConstructor : null,
        storageService : '//ws-na.amazon-adsystem.com',
        wms : '//wms-na.amazon-adsystem.com',
        wc : 'http://widgets.amazon.com',
        ws : '//ws-na.amazon-adsystem.com',
        bloggerUrl : 'http://www.blogger.com',
        trackingId : 'widgetsamazon-20',
        atomId : '',
        trackingIdResponse : {}
    };
</script>
<script type="text/javascript">
    function isInConfigPage() {
        var re = new RegExp("^https?://(www.)?blogger.com");
        return re.test(document.referrer);
    }

    if (isInConfigPage()) {
        document.getElementById('legalNotice').style.display = 'block';
    }
</script>
        <script type="text/javascript">

    var userPrefs = {
        size : [
            {w:120,h:600},
            {w:120,h:240},
            {w:160,h:600},
            {w:180,h:150},
            {w:468,h:60},
            {w:728,h:90},
            {w:300,h:250},
            {w:600,h:520}
        ],
        colorTheme : [
            {
                amazon_color_border : "ENDCAP_BG_COLOR",
                amazon_color_background : "CONTENT_BG_COLOR",
                amazon_color_text : "CONTENT_TEXT_COLOR",
                amazon_color_link : "CONTENT_LINK_COLOR",
                amazon_color_price : "CONTENT_TEXT_COLOR",
                amazon_color_logo : "ENDCAP_TEXT_COLOR"
            },
            {
                amazon_color_border : "336699",
                amazon_color_background : "FFFFFF",
                amazon_color_text : "000000",
                amazon_color_link : "0000FF",
                amazon_color_price : "008000",
                amazon_color_logo : "FFFFFF"
            },
            {
                amazon_color_border : "A8DDA0",
                amazon_color_background : "EBFFED",
                amazon_color_text : "6D6D6D",
                amazon_color_link : "0000FF",
                amazon_color_price : "008000",
                amazon_color_logo : "000000"
            },
            {
                amazon_color_border : "000000",
                amazon_color_background : "F0F0F0",
                amazon_color_text : "000000",
                amazon_color_link : "0000FF",
                amazon_color_price : "008000",
                amazon_color_logo : "F0F0F0"
            },
            {
                amazon_color_border : "6699cc",
                amazon_color_background : "003366",
                amazon_color_text : "AECCEB",
                amazon_color_link : "FFFFFF",
                amazon_color_price : "AECCEB",
                amazon_color_logo : "000000"
            },
            {
                amazon_color_border : "B4D0DC",
                amazon_color_background : "ECF8FF",
                amazon_color_text : "6F6F6F",
                amazon_color_link : "0000CC",
                amazon_color_price : "008000",
                amazon_color_logo : "000000"
            },
            {
                amazon_color_border : "333333",
                amazon_color_background : "000000",
                amazon_color_text : "CCCCCC",
                amazon_color_link : "FFFFFF",
                amazon_color_price : "999999",
                amazon_color_logo : "FFFFFF"
            },
            {
                amazon_color_border : "CCCCCC",
                amazon_color_background : "FFFFFF",
                amazon_color_text : "333333",
                amazon_color_link : "000000",
                amazon_color_price : "666666",
                amazon_color_logo : "000000"
            }
        ]
    };

    function AmazonRGB(red, green, blue) {
        // These are integers between 0 and 255 inclusive.
        this.r = red;
        this.g = green;
        this.b = blue;
    }

    // Accessor methods for the RGB components.
    AmazonRGB.prototype.getR = function() { return this.r; };
    AmazonRGB.prototype.getG = function() { return this.g; };
    AmazonRGB.prototype.getB = function() { return this.b; };

// Defines and returns the 6-digit hex representation
// of this RGB color.
    AmazonRGB.prototype.getHex = function() {
        if (!this.hex) {
            var map = '0123456789ABCDEF';
            this.hex = '' +
                map.substr(Math.floor(this.r / 16), 1) +
                map.substr((this.r % 16), 1) +
                map.substr(Math.floor(this.g / 16), 1) +
                map.substr((this.g % 16), 1) +
                map.substr(Math.floor(this.b / 16), 1) +
                map.substr((this.b % 16), 1);
        }
        return this.hex;
    };

// Returns the equivalent HSV object.
    AmazonRGB.prototype.toHSV = function() {
        // Normalize RGB values for color space transform.
        var r = this.r / 255;
        var g = this.g / 255;
        var b = this.b / 255;

        // Helper values for color space transform.
        var max  = (r > g) ? r : g;
        max  = (max > b) ? max : b;
        var min  = (r < g) ? r : g;
        min  = (min < b) ? min : b;

        var delta = max - min;

        // Color space transform.
        var v = max;
        var s = 0;

        if (max > 0) { s = delta / max; }

        var h = 0;

        if (delta > 0) {
            if ((max == r) && (max != g)) {
                h += (g - b) / delta;
            }
            if ((max == g) && (max != b)) {
                h += (2 + (b - r) / delta);
            }
            if ((max == b) && (max != r)) {
                h += (4 + (r - g) / delta);
            }
            h = h * 60;
            if (h < 0) { h += 360; }
        }

        return new AmazonHSV(h, s, v);
    };

// HSV object
    function AmazonHSV(hue, saturation, value){
        // These are real numbers between 0 and 1 inclusive.
        this.h = hue;
        this.s = saturation;
        this.v = value;
    }

// Accessor methods for the HSV components.
    AmazonHSV.prototype.getH = function() { return this.h; };
    AmazonHSV.prototype.getS = function() { return this.s; };
    AmazonHSV.prototype.getV = function() { return this.v; };

// Returns the equivalent RGB object.
    AmazonHSV.prototype.toRGB = function() {
        var sat_r;
        var sat_g;
        var sat_b;

        // Color space transform
        if (this.h < 120) {
            sat_r = (120 - this.h) / 60;
            sat_g = this.h / 60;
            sat_b = 0;
        } else if (this.h < 240) {
            sat_r = 0;
            sat_g = (240 - this.h) / 60;
            sat_b = (this.h - 120) / 60;
        } else {
            sat_r = (this.h - 240) / 60;
            sat_g = 0;
            sat_b = (360 - this.h) / 60;
        }

        if (sat_r > 1) { sat_r = 1; }
        if (sat_g > 1) { sat_g = 1; }
        if (sat_b > 1) { sat_b = 1; }

        return new AmazonRGB(
            Math.round((1 - this.s + this.s * sat_r) * this.v * 255),
            Math.round((1 - this.s + this.s * sat_g) * this.v * 255),
            Math.round((1 - this.s + this.s * sat_b) * this.v * 255)
        );
    };


/* Container object that holds an RGB object and an HSV object.
   This is the catch-all type that gives you everything
   you will need up front.  With this object, you can create
   a color from RGB values, HSV values, or a hex string.

   Upon object creation, you are not guaranteed that any of the
   private properties exist yet (they are created as needed).
   Therefore, you must use accessor methods to get each property
   of this object.
*/
    function AmazonColor(type, a, b, c) {
        if (type == 'rgb') {
            this.rgb = new AmazonRGB(a,b,c);
            this.r = a;
            this.g = b;
            this.b = c;
        } else if (type == 'hsv') {
            this.hsv = new AmazonHSV(a,b,c);
            this.h = a;
            this.s = b;
            this.v = c;
        } else if (type.match(/[0-9a-f]{6}/i)) {
            // 'type' argument was a hex color value
            var map = '0123456789ABCDEF';
            this.r = map.indexOf(type.substr(0,1)) * 16 + map.indexOf(type.substr(1,1));
            this.g = map.indexOf(type.substr(2,1)) * 16 + map.indexOf(type.substr(3,1));
            this.b = map.indexOf(type.substr(4,1)) * 16 + map.indexOf(type.substr(5,1));
            this.rgb = new AmazonRGB(this.r, this.g, this.b);
            this.hex = type;
        } else {
            // nothing to work with
        }
    }

// Accessor methods for properties.
// Requested properties are calculated when first requested if necessary,
// then stored for later.
    AmazonColor.prototype.getR = function() {
        if (!this.r) {
            if (!this.rgb) { this.rgb = this.hsv.toRGB(); }
            this.r = this.rgb.getR();
        }
        return this.r;
    };

    AmazonColor.prototype.getG = function() {
        if (!this.g) {
            if (!this.rgb) { this.rgb = this.hsv.toRGB(); }
            this.g = this.rgb.getG();
        }
        return this.g;
    };

    AmazonColor.prototype.getB = function() {
        if (!this.b) {
            if (!this.rgb) { this.rgb = this.hsv.toRGB(); }
            this.b = this.rgb.getB();
        }
        return this.b;
    };

    AmazonColor.prototype.getH = function() {
        if (!this.h) {
            if (!this.hsv) { this.hsv = this.rgb.toHSV(); }
            this.h = this.hsv.getH();
        }
        return this.h;
    };

    AmazonColor.prototype.getS = function() {
        if (!this.s)
        {
            if (!this.hsv) { this.hsv = this.rgb.toHSV(); }
            this.s = this.hsv.getS();
        }
        return this.s;
    };

    AmazonColor.prototype.getV = function() {
        if (!this.v) {
            if (!this.hsv) { this.hsv = this.rgb.toHSV(); }
            this.v = this.hsv.getV();
        }
        return this.v;
    };

    AmazonColor.prototype.getHex = function() {
        if (!this.hex) {
            if (!this.rgb) { this.rgb = this.hsv.toRGB(); }
            this.hex = this.rgb.getHex();
        }
        return this.hex;
    };

// Return a contrasting color of the same hue.
    AmazonColor.prototype.getContrasting = function() {
        var newH = this.getH();
        var newS = this.getS();
        var newV = this.getV();

        if (newS == 0) {
            // Grayscale; don't change saturation
            newV = (newV + 0.5) % 1;
        } else {
            newS = (newS + 0.5) % 1;
            newV = (newV + 0.5) % 1;

            // Adjust color for better contrast if it's in the deep blue range.
            if ((newH > 200) && (newH < 275)) {
                if ((newS >= 0.5) && (newV >= 0.5)) {
                    // High saturation and value, decrease saturation
                    newS = newS / 2;
                } else if ((newS <= 0.5) && (newV <= 0.5)) {
                    // Low saturation and value, increase value
                    newV = newV + 0.5;
                }
            }
        }

        return new AmazonColor('hsv', newH, newS, newV);
    };

// Return a similar color of the same hue.
    AmazonColor.prototype.getSimilar = function() {
        var newH = this.getH();
        var newS = this.getS();
        var newV = this.getV();

        // Change it more for highly-saturated colors.
        var tweak = (newS > 0.8) ? 0.1 : 0;

        if (newV > 0.6) { newV = newV - 0.2 - tweak; }
        else if (newV < 0.4) { newV = newV + 0.2 + tweak; }
        else { newV = newV - 0.3; }

        // Adjust color for better contrast if it's in the deep blue range.
        if ((newH > 200) && (newH < 275)) {
            if (newS > 0.8) { newS = newS - 0.4; }
        }

        return new AmazonColor('hsv', newH, newS, newV);
    };

// Simple test to see if a color is "dark" or not.
    AmazonColor.prototype.isDark = function() {
        var rval = false;
        var v = this.getV();

        if (v < 0.6) {
            // Low value...it's dark.
            rval = true;
        } else {
            var h = this.getH();
            var s = this.getS();

            // A strongly-saturated blue or purple is considered "dark".
            if ((h > 200) && (h < 275)) {
                if (s > 0.5) { rval = true; }
            }
        }

        return rval;
    };

    function amazon_pvid() {
        if (!window.amazon_ad_pvid) {
            window.amazon_ad_pvid = "";

            var h2d = "0123456789ABCDEF";
            for (var i = 0; i < 16; i++) {
                window.amazon_ad_pvid += h2d.charAt(Math.floor(16 * Math.random()));
            }
        }
    }

    function amazon_generate_url() {
        // Common stuff
        var amazon_q = window.location.protocol + "//" + amazon_ad_rcm + "/e/cm?";
        amazon_q += "t=" + amazon_ad_tag;
        amazon_q += "&o=" + amazon_ad_o;
        amazon_q += "&p=" + amazon_p(amazon_ad_width, amazon_ad_height);
        amazon_q += "&l=" + amazon_ad_linkcode;
        amazon_q += "&pvid=" + amazon_ad_pvid;

        // Referring URL should be the parent location if the ad page is within an iframe.
        amazon_q += "&ref-url=" + escape(globals.blogURL);
        amazon_q = amazon_q.replace(/\+/g, '%2B');

        amazon_q += "&ref-title=" + escape(globals.blogTitle);

        // get referrer of the page serving these ads, if we can
        try {
            var referrer = top.document.referrer;
            amazon_q += "&ref-ref=" + escape(referrer);
        } catch(e) {
        }

        // Colors
        amazon_q += "&bgc=" + amazon_fix_color(window.amazon_color_background, "FFFFFF");
        amazon_q += "&bdc=" + amazon_fix_color(window.amazon_color_border, "000000");
        amazon_q += "&pcc=" + amazon_fix_color(window.amazon_color_price, "990000");
        amazon_q += "&tec=" + amazon_fix_color(window.amazon_color_text, "000000");
        amazon_q += "&tic=" + amazon_fix_color(window.amazon_color_link, "3399FF");
        amazon_q += "&ac=" + amazon_fix_color(window.amazon_color_logo, "CC6600");

        var bgc = new AmazonColor(amazon_fix_color(window.amazon_color_background, "A1A1A1"));
        var pvc = bgc.getSimilar();
        amazon_q += "&pvc=" + pvc.getHex();

        var bdc = new AmazonColor(amazon_fix_color(window.amazon_color_border, "000000"));
        if (bdc.isDark()) {
            amazon_q += "&lgl=1";
        }

        // Display options
        if (amazon_ad_price == "all") {
            amazon_q += "&mp=1";
        }
        if (amazon_ad_border == 'hide') {
            amazon_q += "&hb=1";
        }
        if (amazon_ad_logo == 'hide') {
            amazon_q += "&hl=1";
        }
        if (amazon_ad_product_images == 'hide') {
            amazon_q += "&hp=1";
        }
        if (amazon_ad_link_target == "new") {
            amazon_q += "&tg=_blank";
        }
        if (amazon_ad_discount == "add") {
            amazon_q += "&dsc=1";
        }

        // Advanced options
        if (window.amazon_ad_exclude) {
            amazon_q += '&exwords=' + filterKeywords(amazon_ad_exclude);
        }

        if (window.amazon_ad_include) {
            amazon_q += '&inwords=' + filterKeywords(amazon_ad_include);
        }

        if (window.amazon_ad_categories) {
            amazon_q += '&incats=' + amazon_ad_categories;
        }

        if (window.amazon_ad_title) {
            // Change all characters to their numerical forms for inclusion in a URI
            var codes = new Array;
            for (var i = 0; i < amazon_ad_title.length; ++i) {
                codes.push(amazon_ad_title.charCodeAt(i));
            }
            var url_amazon_ad_title = codes.toString();
            amazon_q += '&title=' + url_amazon_ad_title;
        }

        amazon_q += '&f=ifr';
        var e = (document.characterSet) ? document.characterSet : document.charset;
        if (e) {
            amazon_q += '&e=' + e.toLowerCase();
        }

        return amazon_q;
    }

    //takes a string keywords argument and makes sure it only contains
//the allowed number of phrases
    function filterKeywords(keywords) {
        var keyword_limit = 5;

        var rtn_keywords;
        if (keywords) {
            var items = keywords.split(/;/);
            if (items.length > keyword_limit) {
                items = items.slice(0, keyword_limit);
                rtn_keywords = items.join(';');
            } else {
                rtn_keywords = keywords;
            }
        }

        return rtn_keywords;
    }

    function amazon_p(w, h) {
        var p = new Array();
        p["120x150"] = 6;
        p["120x240"] = 8;
        p["180x150"] = 9;
        p["120x450"] = 10;
        p["120x600"] = 11;
        p["300x250"] = 12;
        p["468x60"] = 13;
        p["160x600"] = 14;
        p["468x240"] = 15;
        p["468x336"] = 16;
        p["600x520"] = 36;
        p["728x90"] = 48;

        return p[w + "x" + h];
    }

    function amazon_iframe() {
        var rval = false;
        if (document.body) {
            rval = ((document.referrer != '') && ((document.body.clientWidth < (1.5 * amazon_ad_width)) && (document.body.clientHeight < (1.5 * amazon_ad_height))));
        } else if (document.documentElement) {
            rval = ((document.referrer != '') && ((document.documentElement.clientWidth < (1.5 * amazon_ad_width)) && (document.documentElement.clientHeight < (1.5 * amazon_ad_height))));
        }
        return rval;
    }

    function amazon_fix_color(color, dflt) {
        if (!color) {
            return dflt;
        }
        if (color.length != 6) {
            return dflt;
        }
        color = color.toUpperCase();
        var h2d = "0123456789ABCDEF";
        for (var i = 0; i < 6; i++) {
            var x = color.charAt(i);
            if (h2d.indexOf(x) == -1) {
                return dflt;
            }
        }
        return color;
    }

    function createOmakaseWidget() {
        if(config.trackingIdResponse.isOk){
            _createOmakaseWidget();
        }
    }

    function _createOmakaseWidget() {
        var prefs = new _IG_Prefs();
        var size = prefs.getInt("size");
        var colorTheme = prefs.getInt("color_theme");

        var options;
        if (colorTheme == 0) {
            options = userPrefs.colorTheme[colorTheme];
            window.amazon_color_border = gadgets.skins.getProperty(options.amazon_color_border);
            window.amazon_color_background  = gadgets.skins.getProperty(options.amazon_color_background);
            window.amazon_color_text  = gadgets.skins.getProperty(options.amazon_color_text);
            window.amazon_color_link  = gadgets.skins.getProperty(options.amazon_color_link);
            window.amazon_color_price  = gadgets.skins.getProperty(options.amazon_color_price);
            window.amazon_color_logo  = gadgets.skins.getProperty(options.amazon_color_logo);
        } else {
            options = userPrefs.colorTheme[colorTheme];
            window.amazon_color_border = options.amazon_color_border;
            window.amazon_color_background  = options.amazon_color_background;
            window.amazon_color_text  = options.amazon_color_text;
            window.amazon_color_link  = options.amazon_color_link;
            window.amazon_color_price  = options.amazon_color_price;
            window.amazon_color_logo  = options.amazon_color_logo;
        }

        window.amazon_ad_price = "all";
        window.amazon_ad_border = 'show';
        window.amazon_ad_product_images = 'show';
        window.amazon_ad_link_target = "same";
        window.amazon_ad_referrer = "current";
        window.amazon_ad_discount = "add";
        window.amazon_ad_logo = "hide";
        window.amazon_ad_o = 1;
        window.amazon_ad_rcm = "rcm.amazon.com";
        window.amazon_ad_linkcode = "op2";

        window.amazon_ad_tag = config.trackingId;
        window.amazon_ad_width = userPrefs.size[size].w;
        window.amazon_ad_height = userPrefs.size[size].h;

        amazon_pvid();

        var iframe = document.createElement('iframe');
        iframe.src = amazon_generate_url();
        iframe.marginWidth = "0";
        iframe.marginHeight = "0";
        iframe.width = amazon_ad_width;
        iframe.height = amazon_ad_height;
        iframe.border = "0";
        iframe.frameBorder = "0";
        iframe.style.border = "none";
        iframe.scrolling = "no";

        var widget = document.getElementById("widget");
        widget.appendChild(iframe);
        gadgets.window.adjustHeight();
    }

    config.widgetConstructor = createOmakaseWidget;

</script><script type="text/javascript">
    var MAX_RETRIES = 5;
    var retryAttempt = 0;

    var globals = {
        blogURL : "REF_URL_FETCH_ERROR",
        blogTitle : "Default Title"
    };

    function getBlogId() {
        window.blog = new google.Blog(function () {
            window.setTimeout(getBlog, 100);
        }, window.name);
    }

    function getBlog() {
        try {
            config.atomId = window.blog.getCurrentBlogId();
            var script = document.createElement('script');
            script.src = config.storageService + '/widgets/AssociateStorageService'
                    + '?Service=Blogger'
                    + '&MarketPlace=US'
                    + '&Operation=GetTrackingId'
                    + '&Type=jsonp'
                    + '&AtomId=' + config.atomId
                    + '&Callback=getTrackingId';
            script.type = 'text/javascript';
            document.body.appendChild(script);
        } catch (e) {
            retryAttempt++;
            if (retryAttempt < MAX_RETRIES) {
                getBlogId();
            }
        }
    }

    function getTrackingId(result) {
        if (result) {
            config.trackingIdResponse = result;
            if (result.isOk && (result.responseCode == "SUCCESSFUL")
                    && result.data.trackingId) {
                config.trackingId = result.data.trackingId;
            }
        }
        if (isAPF() || isInConfigPage()) {
            config.widgetConstructor();
            gadgets.window.adjustHeight();
        } else {
            window.blog.getCommentsJson(onLoadFeed);
        }
    }

    function isAPF(){
        return (typeof amzn_apf == 'object' && amzn_apf != null);
    }

    function onLoadFeed(data) {
        try {
            if (data.data.feed.link[2].href) {
                globals.blogURL = data.data.feed.link[2].href;
                globals.blogTitle = data.data.feed.title.$t;
            }
        } catch (e) {
        }
        config.widgetConstructor();
        gadgets.window.adjustHeight();
    }

    function getBlogUrl() {
        return globals.blogURL.toString();
    }

    function embedSWF() {
        var amzn_ws_path = config.ws + "/widgets/q?";

        var swfObject = new SWFObject(amzn_ws_path, "amzn_widget", amzn_wdgt.width, amzn_wdgt.height);
        swfObject.addVariable("MarketPlace", amzn_wdgt.marketPlace);
        swfObject.addVariable("Operation", "GetDisplayTemplate");
        swfObject.addVariable("ServiceVersion", "20070822");
        swfObject.addVariable("WS", "1");
        swfObject.addVariable("Partner", "Blogger");
        swfObject.addVariable("ID", amzn_wdgt["widget"]);
        swfObject.setAttribute('swf', amzn_ws_path + swfObject.getVariablePairs().join("&"));
        for (var i in amzn_wdgt) {
            if (!amzn_wdgt.hasOwnProperty(i)) {
                continue;
            }
            var j = i.substr(1);
            var k = i.charAt(0).toUpperCase() + j;
            if (k == "Widget") {
                k = "ID";
            }
            swfObject.addVariable(k, escapeParam(amzn_wdgt[i]));
        }
        swfObject.addParam("quality", "high");
        swfObject.addParam("bgcolor", "#FFFFFF");
        swfObject.addParam("allowscriptaccess", "always");
        document.getElementById("widget").innerHTML = swfObject.getSWFHTML();
    }

    function escapeParam(param){
        param = encodeURIComponent(param);
        param=param.replace("+", "%20");
        param=param.replace("/", "%2F");
        return param;
    }

    gadgets.util.registerOnLoadHandler(getBlogId);
</script>


                
    <script>gadgets.util.runOnLoadHandlers();</script><script>window.google.csi.tickDl();
</script></body></html>